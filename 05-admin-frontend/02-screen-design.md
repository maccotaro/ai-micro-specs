# 02-screen-design.md - 画面設計

## 概要

Admin Frontendは管理者向けの総合管理インターフェースを提供します。Next.js 15のPages Routerを使用し、shadcn/uiベースのコンポーネントで構築されています。

## 全体レイアウト構造

### Layoutコンポーネント (`/src/components/Layout/Layout.tsx`)

```typescript
interface LayoutProps {
  children: React.ReactNode;
  maxWidth?: string;
}

// 3カラムレイアウト構成
// ┌─────────────────────────────────────┐
// │          Header (固定)              │
// ├─────┬───────────────────────────────┤
// │     │                               │
// │ S   │   コンテンツエリア            │
// │ i   │   (children)                  │
// │ d   │                               │
// │ e   │                               │
// │ b   │                               │
// │ a   │                               │
// │ r   │                               │
// │     │                               │
// └─────┴───────────────────────────────┘
```

**主要コンポーネント:**
- `Header`: ユーザー情報、通知、設定メニュー
- `Sidebar`: ナビゲーションメニュー（ダッシュボード、ユーザー、ドキュメント等）
- `ErrorBoundary`: エラーハンドリング境界

## 主要画面設計

### 1. ダッシュボード画面 (`/dashboard`)

**目的:** システム全体の状況を一目で把握できる管理者ダッシュボード

**レイアウト構成:**

```
┌──────────────────────────────────────────────────┐
│ ダッシュボード                          最終更新: XX:XX │
├──────────────────────────────────────────────────┤
│ 統計カード (4列グリッド)                         │
│ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌───────┐│
│ │総ユーザー│ │アクティブ│ │本日登録  │ │アラート││
│ │  1,234   │ │   856    │ │   12     │ │   3   ││
│ └──────────┘ └──────────┘ └──────────┘ └───────┘│
├──────────────────────────────────────────────────┤
│ チャートエリア (2列グリッド)                     │
│ ┌────────────────────────┐ ┌──────────────────┐│
│ │ユーザー成長推移 (折れ線)│ │ユーザーステータス││
│ │                        │ │  (ドーナツ)      ││
│ └────────────────────────┘ └──────────────────┘│
├──────────────────────────────────────────────────┤
│ 最近のアクティビティ (テーブル)                  │
│ ┌────┬───────┬─────────┬───────┬──────────┐│
│ │ID  │ユーザー│アクション │対象   │時刻      ││
│ ├────┼───────┼─────────┼───────┼──────────┤│
│ │... │...    │...      │...    │...       ││
│ └────┴───────┴─────────┴───────┴──────────┘│
└──────────────────────────────────────────────────┘
```

**主要コンポーネント:**
- `StatCard`: 統計情報カード（Users, UserPlus, AlertTriangle, CheckCircle アイコン）
- `LineChart`: ユーザー成長推移グラフ
- `DoughnutChart`: ユーザーステータス円グラフ
- Activity Table: 最近のユーザーアクション一覧

**データフロー:**
```typescript
interface DashboardStats {
  totalUsers: number;
  activeUsers: number;
  newUsersToday: number;
  systemAlerts: number;
  servicesOnline: number;
  totalServices: number;
  userGrowthData: ChartData;
  userStatusData: ChartData;
  recentActivities: Activity[];
  lastUpdated: string;
}

// API呼び出し
GET /api/dashboard/stats
GET /api/system/status
```

**自動更新:** 30秒ごとにデータ自動リフレッシュ

### 2. ユーザー管理画面 (`/users`)

**目的:** システム内の全ユーザーの管理とロール設定

**レイアウト構成:**

```
┌──────────────────────────────────────────────────┐
│ ユーザー管理                        [+ 新規作成]  │
├──────────────────────────────────────────────────┤
│ 検索フィルター                                    │
│ [検索 ________] [ロール: すべて▼] [ステータス: 全▼]│
├──────────────────────────────────────────────────┤
│ ユーザーテーブル                                  │
│ ┌──────┬─────────┬─────┬──────┬─────┬───────┐│
│ │ID    │メール   │名前 │ロール│状態 │操作   ││
│ ├──────┼─────────┼─────┼──────┼─────┼───────┤│
│ │uuid  │user@... │田中 │admin │有効 │[編集] ││
│ │...   │...      │...  │...   │...  │[削除] ││
│ └──────┴─────────┴─────┴──────┴─────┴───────┘│
├──────────────────────────────────────────────────┤
│ ページネーション                                  │
│           < 1 2 3 4 5 >                          │
└──────────────────────────────────────────────────┘
```

**主要機能:**
- **検索:** メール、名前でのリアルタイム検索
- **フィルタリング:** ロール別（admin, user, super_admin）、ステータス別（有効/無効）
- **CRUD操作:** ユーザー作成、編集、削除、ロール変更
- **バルク操作:** 複数ユーザーの一括管理（将来実装予定）

**編集モーダル:**
```typescript
interface UserEditModalProps {
  isOpen: boolean;
  user: User | null;
  onClose: () => void;
  onSave: (user: User) => Promise<void>;
}

// フィールド
- メールアドレス (編集不可)
- 姓・名
- ロール選択 (ドロップダウン)
- ステータス (有効/無効 トグル)
- パスワードリセット (オプション)
```

**API連携:**
```
GET    /api/users?page=1&limit=20&search=...&role=...
GET    /api/users/:id
PUT    /api/users/:id
DELETE /api/users/:id
```

### 3. ログビューワー画面 (`/logs`)

**目的:** システムログの閲覧とフィルタリング

**レイアウト構成:**

```
┌──────────────────────────────────────────────────┐
│ システムログ                          [エクスポート]│
├──────────────────────────────────────────────────┤
│ フィルターパネル                                  │
│ [レベル: すべて▼] [期間: 今日▼] [検索: ______]  │
│ [サービス: すべて▼] [ユーザー: すべて▼]          │
├──────────────────────────────────────────────────┤
│ ログテーブル                                      │
│ ┌─────────┬──────┬────────┬───────┬──────────┐│
│ │時刻     │レベル│サービス│ユーザー│メッセージ││
│ ├─────────┼──────┼────────┼───────┼──────────┤│
│ │12:34:56 │INFO  │auth    │admin  │Login OK  ││
│ │12:35:01 │ERROR │api     │system │Connection││
│ │12:35:15 │WARN  │db      │-      │Slow query││
│ └─────────┴──────┴────────┴───────┴──────────┘│
├──────────────────────────────────────────────────┤
│ 詳細ドロワー (選択時)                            │
│ ┌────────────────────────────────────────────┐  │
│ │ ログID: log-123456                         │  │
│ │ タイムスタンプ: 2025-09-30 12:34:56        │  │
│ │ スタックトレース:                          │  │
│ │   at function1 (file.ts:123)               │  │
│ │   at function2 (file.ts:456)               │  │
│ └────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────┘
```

**フィルター機能:**
- **レベル:** INFO, WARN, ERROR, DEBUG
- **期間:** 今日, 過去7日, 過去30日, カスタム
- **サービス:** auth, api-user, api-admin, postgres, redis
- **ユーザー:** 特定ユーザーのアクションログ
- **検索:** メッセージ全文検索

**リアルタイム更新:**
- WebSocketまたはポーリングで新規ログを自動取得
- 新規ERROR/WARNログのデスクトップ通知（オプション）

### 4. ドキュメント一覧画面 (`/documents`)

**目的:** アップロード済みドキュメントの管理とステータス確認

**レイアウト構成:**

```
┌──────────────────────────────────────────────────┐
│ ドキュメント管理               [+ 新規アップロード]│
├──────────────────────────────────────────────────┤
│ 統計カード (4列)                                  │
│ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌───────┐│
│ │総ドキュメ│ │処理完了  │ │処理中    │ │失敗   ││
│ │ント: 245 │ │  230     │ │   12     │ │   3   ││
│ └──────────┘ └──────────┘ └──────────┘ └───────┘│
├──────────────────────────────────────────────────┤
│ フィルターパネル                                  │
│ [検索: ________] [タイプ: すべて▼]               │
│ [ステータス: すべて▼] [KB: すべて▼] [更新 🔄]   │
├──────────────────────────────────────────────────┤
│ ドキュメントテーブル                              │
│ ┌──────┬────────┬─────┬──────┬──────┬───────┐│
│ │名前  │タイプ  │状態 │KB    │日時  │操作   ││
│ ├──────┼────────┼─────┼──────┼──────┼───────┤│
│ │doc.pdf│PDF    │完了 │KB-1  │09/30 │[表示] ││
│ │      │       │🟢   │      │      │[編集] ││
│ │      │       │     │      │      │[削除] ││
│ ├──────┼────────┼─────┼──────┼──────┼───────┤│
│ │file.pdf│PDF  │処理中│KB-2 │09/30 │[中止] ││
│ │      │       │🟡   │      │      │       ││
│ └──────┴────────┴─────┴──────┴──────┴───────┘│
└──────────────────────────────────────────────────┘
```

**ステータス表示:**

| ステータス | アイコン | 色 | 説明 |
|-----------|---------|-----|-----|
| uploaded | Upload | 青 | アップロード済み、処理待ち |
| processing | Clock | 黄 | Docling処理中 |
| processed | CheckCircle | 緑 | 処理完了、OCR結果利用可能 |
| failed | XCircle | 赤 | 処理失敗、エラー詳細あり |

**操作メニュー:**
- **表示:** ドキュメント詳細ページへ遷移
- **OCR編集:** `/documents/ocr/[id]` へ遷移
- **再処理:** 失敗したドキュメントの再処理
- **削除:** 確認ダイアログ表示後に削除

**削除確認ダイアログ:**
```typescript
interface DocumentDeleteDialogProps {
  isOpen: boolean;
  document: KnowledgeDocument | null;
  onConfirm: () => Promise<void>;
  onCancel: () => void;
  isDeleting: boolean;
}
```

### 5. ドキュメントアップロード画面 (`/documents/new`)

**目的:** 新規ドキュメントのアップロードとナレッジベース紐付け

**レイアウト構成:**

```
┌──────────────────────────────────────────────────┐
│ ドキュメントアップロード              [← 戻る]   │
├──────────────────────────────────────────────────┤
│ ステップインジケーター                            │
│ ① ファイル選択 → ② 設定 → ③ アップロード       │
│      (現在)                                      │
├──────────────────────────────────────────────────┤
│ ドラッグ&ドロップエリア                          │
│ ┌────────────────────────────────────────────┐  │
│ │                                            │  │
│ │        📄 ファイルをドラッグ               │  │
│ │           または                           │  │
│ │        [ファイルを選択]                    │  │
│ │                                            │  │
│ │    対応形式: PDF, DOCX, PPTX, XLSX         │  │
│ │    最大サイズ: 50MB                        │  │
│ └────────────────────────────────────────────┘  │
├──────────────────────────────────────────────────┤
│ 選択済みファイル                                  │
│ ┌────────────────────────────────────────────┐  │
│ │ 📄 document.pdf (2.5 MB)            [×]    │  │
│ └────────────────────────────────────────────┘  │
├──────────────────────────────────────────────────┤
│ 設定                                              │
│ ナレッジベース: [選択してください ▼]             │
│ 処理オプション:                                   │
│   ☑ OCR実行                                      │
│   ☑ ベクトル化                                   │
│   ☐ テーブル抽出                                 │
├──────────────────────────────────────────────────┤
│                              [キャンセル] [実行] │
└──────────────────────────────────────────────────┘
```

**アップロード進捗表示:**
```
┌────────────────────────────────────────────┐
│ アップロード中...                          │
│ ━━━━━━━━━━━━━━━━━━━━━━━ 75%               │
│ document.pdf (1.9MB / 2.5MB)               │
└────────────────────────────────────────────┘
```

**バリデーション:**
- ファイル形式チェック（MIME type検証）
- ファイルサイズ制限（デフォルト50MB）
- ナレッジベース選択必須
- 重複ファイル名警告

### 6. OCR調整画面 (`/documents/ocr/[id]`)

**目的:** OCR結果の確認・編集とレイアウト調整

**レイアウト構成:**

```
┌──────────────────────────────────────────────────────────────────────┐
│ OCR解析結果                            [保存] [RAG変換] [チャット] [設定]│
├──────────────────────────────────────────────────────────────────────┤
│ 3カラムレイアウト                                                    │
├────┬──────────────┬───────────────────────────────────────────────┤
│ P  │ 文書構造     │ プレビューキャンバス                         │
│ a  │ ツリー       │ ┌─────────────────────────────────────────┐│
│ g  │ (60%)        │ │ [ページナビ: ◀ 1/10 ▶] [ズーム: - 100% +]││
│ e  │              │ ├─────────────────────────────────────────┤│
│    │ □ Page 1     │ │                                         ││
│ L  │  ├─ ID-1 (ti)│ │     ┌──────────────────────┐          ││
│ i  │  ├─ ID-2 (tx)│ │     │ ID-1: タイトル      │          ││
│ s  │  └─ ID-3 (ta)│ │     │ (選択中)            │          ││
│ t  │    ├─ ID-4  │ │     └──────────────────────┘          ││
│    │    └─ ID-5  │ │                                         ││
│ (左│ □ Page 2     │ │     ┌──────────────┐                  ││
│ 40 │              │ │     │ ID-2: 本文   │                  ││
│ px)│──────────────│ │     └──────────────┘                  ││
│    │ OCRテキスト  │ │                                         ││
│    │ 編集エリア   │ │     ┌──────────────────────────┐      ││
│    │ (40%)        │ │     │ ID-3:                    │      ││
│    │              │ │     │ ┌──┬──┬──┐              │      ││
│    │ ID: ID-1     │ │     │ │  │  │  │テーブル      │      ││
│    │ Type: [title▼│ │     │ └──┴──┴──┘              │      ││
│    │              │ │     └──────────────────────────┘      ││
│    │ Text:        │ │                                         ││
│    │ [タイトル_   │ │ [矩形を選択してOCR実行または編集]        ││
│    │ _______]     │ │                                         ││
│    │              │ │                                         ││
│    │ [画像保存]   │ │                                         ││
│    │ [削除]       │ │                                         ││
└────┴──────────────┴───────────────────────────────────────────────┘
```

**左カラム - ページリスト (40px):**
- ページサムネイル縦並び
- 現在ページのハイライト
- クリックでページ切り替え

**中央カラム - 文書構造とテキスト編集 (224px):**

**上段: 文書構造ツリー (60%)**
- 階層構造表示（親子関係）
- ドラッグ&ドロップで階層変更
- 要素タイプごとのアイコン
- 展開/折りたたみ機能
- 選択要素のハイライト

**下段: OCRテキスト編集 (40%)**
```typescript
interface OCRTextEditorProps {
  selectedRectId: string | null;
  currentText: string;
  currentElementType: ElementType;
  onTextChange: (text: string) => void;
  onElementTypeChange: (type: ElementType) => void;
  onTableInfoChange: (info: TableInfo) => void;
}
```

**フィールド:**
- ID表示（読み取り専用）
- 要素タイプ選択（12種類）
- テキスト編集エリア（textarea）
- テーブル情報編集（table_cellタイプ時）
  - col: 列番号
  - row: 行番号
  - cell_type: header/data
- 画像保存ボタン
- 削除ボタン

**右カラム - プレビューキャンバス (flex-1):**

**機能一覧:**

1. **矩形表示:** 既存のOCR結果矩形の視覚化
2. **矩形選択:** クリックで選択、ハイライト表示
3. **矩形移動:** ドラッグで位置調整
4. **矩形リサイズ:** コーナーハンドルでサイズ変更
5. **新規矩形描画:** 背景ドラッグで新規作成
6. **アクションメニュー:**
   - OCR実行ボタン
   - 画像切り出しボタン
   - 削除ボタン
7. **ズーム機能:** 50%〜300%

**座標系:**
- rectangleScale: 2.0（144 DPI画像に72 DPI座標を適用）
- zoomLevel: 0.5〜3.0（表示倍率）

**キーボードショートカット:**
- `Delete`: 選択矩形を削除
- `Ctrl/Cmd + S`: 変更を保存
- `Ctrl/Cmd + Z`: 操作を元に戻す（将来実装）
- `Arrow Keys`: 選択矩形を1pxずつ移動（将来実装）

### 7. ナレッジベース管理画面 (`/knowledgebase`)

**目的:** ナレッジベースの作成・編集・削除

**レイアウト構成:**

```
┌──────────────────────────────────────────────────┐
│ ナレッジベース管理                   [+ 新規作成]│
├──────────────────────────────────────────────────┤
│ 統計カード                                        │
│ ┌──────────┐ ┌──────────┐ ┌──────────┐          │
│ │総KB数    │ │総ドキュメ│ │総チャンク│          │
│ │   12     │ │ント: 245 │ │ 数: 1,234│          │
│ └──────────┘ └──────────┘ └──────────┘          │
├──────────────────────────────────────────────────┤
│ ナレッジベース一覧 (カードグリッド)              │
│ ┌────────────────────┐ ┌────────────────────┐  │
│ │ 製品マニュアル     │ │ 社内規定集         │  │
│ │ ドキュメント: 42   │ │ ドキュメント: 18   │  │
│ │ チャンク: 356      │ │ チャンク: 124      │  │
│ │ 更新: 2日前        │ │ 更新: 1週間前      │  │
│ │ [開く] [編集] [削除]│ │ [開く] [編集] [削除]│  │
│ └────────────────────┘ └────────────────────┘  │
│ ┌────────────────────┐ ┌────────────────────┐  │
│ │ ...                │ │ ...                │  │
│ └────────────────────┘ └────────────────────┘  │
└──────────────────────────────────────────────────┘
```

**ナレッジベース詳細画面 (`/knowledgebase/[id]/edit`):**

```
┌──────────────────────────────────────────────────┐
│ ナレッジベース編集                      [← 戻る] │
├──────────────────────────────────────────────────┤
│ 基本情報                                          │
│ 名前: [製品マニュアル_________________]          │
│ 説明: [製品の使用方法とFAQをまとめたKB___]       │
│      [_________________________________]       │
│ モデル: [llama3.2:latest ▼]                      │
│ Embedding: [mxbai-embed-large ▼]                 │
├──────────────────────────────────────────────────┤
│ 関連ドキュメント                     [+ 追加]    │
│ ┌──────┬────────┬─────┬──────┬───────┐        │
│ │名前  │タイプ  │状態 │サイズ│操作   │        │
│ ├──────┼────────┼─────┼──────┼───────┤        │
│ │doc1  │PDF     │完了 │2.5MB │[削除] │        │
│ │doc2  │DOCX    │完了 │1.2MB │[削除] │        │
│ └──────┴────────┴─────┴──────┴───────┘        │
├──────────────────────────────────────────────────┤
│                              [キャンセル] [保存] │
└──────────────────────────────────────────────────┘
```

### 8. チャット画面 (`/knowledgebase/[id]/chat`)

**目的:** ナレッジベースとの対話型検索・質問応答

**レイアウト構成:**

```
┌──────────────────────────────────────────────────────────────┐
│ ナレッジベース: 製品マニュアル              [⚙設定] [← 戻る]│
├──────────────────────────────────────────────────────────────┤
│ チャット履歴エリア (スクロール可能)                          │
│                                                              │
│ ┌──────────────────────────────────────────────────────┐  │
│ │ 🧑 ユーザー                                  12:34    │  │
│ │ 製品Xの初期設定方法を教えてください                  │  │
│ └──────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌──────────────────────────────────────────────────────┐  │
│ │ 🤖 AI                                        12:34    │  │
│ │ 製品Xの初期設定は以下の手順で行います:               │  │
│ │ 1. 電源ボタンを3秒長押し                             │  │
│ │ 2. 設定画面で言語を選択                              │  │
│ │ 3. Wi-Fi接続を設定                                   │
│ │                                                      │  │
│ │ 📎 参照ドキュメント:                                 │  │
│ │ • 製品X_初期設定マニュアル.pdf (p.5-8)               │  │
│ │   関連度: 0.92 [詳細を見る]                          │  │
│ │ • FAQ集.pdf (p.12)                                   │  │
│ │   関連度: 0.85 [詳細を見る]                          │  │
│ └──────────────────────────────────────────────────────┘  │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│ 入力エリア                                                   │
│ [質問を入力してください___________________________] [送信🚀]│
└──────────────────────────────────────────────────────────────┘
```

**チャット設定 (`ChatSettings`):**
```typescript
interface ChatSettings {
  model: string;              // LLMモデル選択
  temperature: number;        // 0.0 - 1.0
  maxTokens: number;          // 最大生成トークン数
  retrievalTopK: number;      // 検索上位K件
  retrievalThreshold: number; // 類似度閾値
}
```

**参照チャンク詳細モーダル (`ChunkDetailModal`):**
```
┌────────────────────────────────────────────┐
│ チャンク詳細                        [×]   │
├────────────────────────────────────────────┤
│ ドキュメント: 製品X_初期設定マニュアル.pdf│
│ ページ: 5-8                                │
│ チャンクID: chunk-123456                   │
│ 関連度スコア: 0.92                         │
├────────────────────────────────────────────┤
│ テキスト内容:                              │
│ ┌──────────────────────────────────────┐  │
│ │ 製品Xの初期設定                      │  │
│ │                                      │  │
│ │ 1. 電源ボタンを3秒間長押ししてくだ  │  │
│ │    さい。画面に言語選択メニューが   │  │
│ │    表示されます。                    │  │
│ │ ...                                  │  │
│ └──────────────────────────────────────┘  │
├────────────────────────────────────────────┤
│                         [OCR編集へ] [閉じる]│
└────────────────────────────────────────────┘
```

**ストリーミング表示:**
- Server-Sent Events (SSE) または WebSocket
- リアルタイムでAI応答を段階的に表示
- タイピングアニメーション効果

### 9. システム設定画面 (`/settings`)

**目的:** システム全体の設定管理

**レイアウト構成:**

```
┌──────────────────────────────────────────────────┐
│ システム設定                                      │
├──────────────────────────────────────────────────┤
│ タブナビゲーション                                │
│ [一般] [セキュリティ] [通知] [バックアップ]     │
├──────────────────────────────────────────────────┤
│ 一般設定                                          │
│                                                  │
│ サイト名:                                        │
│ [Admin Portal_________________]                  │
│                                                  │
│ タイムゾーン:                                    │
│ [Asia/Tokyo ▼]                                   │
│                                                  │
│ 言語:                                            │
│ [日本語 ▼]                                       │
│                                                  │
│ アップロード設定:                                │
│ 最大ファイルサイズ: [50] MB                      │
│ 許可する拡張子: [pdf,docx,pptx,xlsx____]        │
│                                                  │
│ セッション設定:                                  │
│ セッションタイムアウト: [30] 分                  │
│ ☑ アイドルタイムアウトを有効化                   │
│                                                  │
├──────────────────────────────────────────────────┤
│                              [リセット] [保存]   │
└──────────────────────────────────────────────────┘
```

## 要素タイプ（DocLayNet 12クラス体系）

OCR調整画面で使用される要素タイプ:

| タイプ | 説明 | アイコン | 用途 |
|--------|------|---------|------|
| text | テキスト | 📝 | 本文、段落 |
| title | タイトル | 📌 | 文書タイトル |
| section_header | セクションヘッダー | 📑 | 見出し、章タイトル |
| list_item | リスト項目 | 🔹 | 箇条書き項目 |
| table | テーブル | 📊 | 表全体 |
| table_cell | テーブルセル | 🔲 | 表のセル（拡張） |
| picture | 図・画像 | 🖼️ | 画像、図表 |
| caption | キャプション | 💬 | 図表の説明 |
| formula | 数式 | 🔢 | 数式、計算式 |
| page_header | ページヘッダー | ⬆️ | ページ上部 |
| page_footer | ページフッター | ⬇️ | ページ下部 |
| footnote | 脚注 | 📎 | 注釈、脚注 |

## レスポンシブ対応

### ブレークポイント

```typescript
// Tailwind CSS設定
const breakpoints = {
  sm: '640px',   // モバイル
  md: '768px',   // タブレット
  lg: '1024px',  // デスクトップ
  xl: '1280px',  // 大画面
  '2xl': '1536px' // 超大画面
};
```

### 画面サイズ別レイアウト調整

**モバイル (< 768px):**
- サイドバーをハンバーガーメニューに変更
- 統計カードを1列表示
- テーブルをカードビューに変更
- OCR調整画面は使用不可（デスクトップ推奨メッセージ）

**タブレット (768px - 1024px):**
- サイドバーを折りたたみ可能に
- 統計カードを2列表示
- OCR調整画面は2カラム（ツリー+キャンバス）

**デスクトップ (> 1024px):**
- 全機能フル表示
- OCR調整画面は3カラム表示

## アクセシビリティ

### WAI-ARIA対応
- 適切な `role`, `aria-label`, `aria-describedby` 属性
- キーボードナビゲーション対応
- フォーカスインジケーターの視認性確保

### カラーコントラスト
- WCAG 2.1 AA基準準拠
- 色覚異常対応（アイコン+テキスト併用）

## パフォーマンス最適化

### ページロード最適化
- Next.js Image Optimization
- Code Splitting（動的import）
- Lazy Loading（画像、コンポーネント）

### データフェッチ最適化
- SWR / React Query でのキャッシュ管理
- Pagination / Infinite Scroll
- Debounce検索入力（300ms）

### OCR調整画面の最適化
- Canvas rendering最適化（requestAnimationFrame）
- 画像プリロード
- 矩形操作のメモ化（useMemo, useCallback）

## エラーハンドリング

### エラーページ
```typescript
// エラー境界コンポーネント
<ErrorBoundary>
  <OCRErrorPage
    error="メタデータの読み込みに失敗しました"
    documentId={id}
  />
</ErrorBoundary>
```

### トースト通知
```typescript
// 成功・エラー通知
toast.success('ドキュメントを保存しました');
toast.error('保存に失敗しました');
toast.warning('未保存の変更があります');
```

## まとめ

Admin Frontendの画面設計は、管理者の効率的なワークフローを実現するために、以下の原則に基づいています:

1. **一貫性:** 全画面で統一されたUIパターン
2. **明確性:** 各要素の役割が明確
3. **効率性:** 最小限のクリックで目的達成
4. **フィードバック:** 操作結果の即座の視覚的フィードバック
5. **拡張性:** 新機能追加が容易な構造

これらの設計により、管理者は直感的にシステムを操作でき、ドキュメント管理とナレッジベース運用を効率的に行うことができます。